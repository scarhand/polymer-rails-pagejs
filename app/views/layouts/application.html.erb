<!DOCTYPE html>
<html>
  <head>
    <title>PolymerRailsPagejs</title>
    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
    <%= csrf_meta_tags %>
    <%= html_import_tag 'application'%>
  </head>
  <body class="fullbleed">
    <my-app id="app"></my-app>
  </body>
  <script>
    (function(document) {
      'use strict';
      // Grab a reference to our auto-binding template
      // and give it some initial binding values
      // Learn more about auto-binding templates at http://goo.gl/Dx1u2g
      var app = document.querySelector('#app');
      // Sets app default base URL
    })(document);
    window.addEventListener('WebComponentsReady', function() {
      // We use Page.js for routing. This is a Micro
      // client-side router inspired by the Express router
      // More info: https://visionmedia.github.io/page.js/
      // Removes end / from app.baseUrl which page.base requires for production
      if (window.location.port === '') {  // if production
        page.base('/'.replace(/\/$/, ''));
      }
      // // Routes
      // page('*', function(ctx, next) {
      //   next();
      // });
      page('/', function() {
        app.route = 'home';
      });
      // 404
      page('*', function() {
        app.displayMessage('Oops, that route does not exist, let me take you home.');
        page.redirect('/');
      });
      // add #! before urls
      page({
        hashbang: true
      });
    });
  </script>
</html>
